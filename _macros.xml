<evaml name="task">
  <settings>
    <voice tone="en-US_AllisonV3Voice" />
    <lightEffects mode="on" />
    <audioEffects mode="on" vol="100%" />
  </settings>
  <script>
    
    <evaEmotion emotion="neutral" />
    <light state="on" color="white" />
    <audio source="mario-start" block="true" />
    <light state="on" color="yellow" />
    <evaEmotion emotion="happy" />
    <talk>Hi, I'm the robot Eva / Hello, my name is Eva / Hi, what is up. I am the robot Eva</talk>
    <light state="on" color="pink" />
    <evaEmotion emotion="neutral" />
    <wait duration="2000" />
    
    <talk>What is your name?</talk>
    <listen />
    <talk>Hello $, I'm going to present my expressions</talk>
    <evaEmotion emotion="happy" />
    <talk>I can express happiness</talk>
    <evaEmotion emotion="sad" />
    <talk>I can express sadness</talk> 
    <evaEmotion emotion="angry" />
    <talk>I can express anger</talk>
    <evaEmotion emotion="neutral" />
    <talk>Hey $, let's play the emotions game?</talk>
    <listen />
    <switch var="$">
      <case op="contain" value="yes">
        <evaEmotion emotion="happy" />
        <talk>Excelent! Let's go now</talk>
      </case>
      <case op="contain" value="no">
        <evaEmotion emotion="sad" />
        <talk>Oh, I'm sorry you don't want to play. Bye!</talk>
        <light state="off" />
        <stop />
      </case>
    </switch>
    
    <talk>I will show some emotions and you try to imitate me</talk>
    <counter var="score" op="=" value="0" />
    <counter var="chance" op="=" value="0" />
    <random id="LOOP" min="1" max="3" />
    <switch var="$">
      <case op="eq" value="1">
        <evaEmotion emotion="sad" />
        <light state="on" color="blue" />
        <talk>Can you imitate me?</talk>
      <userEmotion />
    <switch var="$">
          <case op="exact" value="sad">
            <evaEmotion emotion="happy" />
      <talk>Ok! You are correct</talk>
      <counter var="score" op="+" value="1" />
    </case>
          <default>
            <evaEmotion emotion="sad" />
      <talk>You are wrong</talk>
    </default>
        </switch>
      </case>
      <case op="eq" value="2">
        <evaEmotion emotion="happy" />
        <light state="on" color="yellow" />
        <talk>Can you imitate me?</talk>
      <userEmotion />
    <switch var="$">
          <case op="exact" value="happy">
            <evaEmotion emotion="happy" />
      <talk>Ok! You are correct</talk>
      <counter var="score" op="+" value="1" />
    </case>
          <default>
            <evaEmotion emotion="sad" />
      <talk>You are wrong</talk>
    </default>
        </switch>
      </case>
      <case op="eq" value="3">
        <evaEmotion emotion="angry" />
        <light state="on" color="red" />
        <talk>Can you imitate me?</talk>
      <userEmotion />
    <switch var="$">
          <case op="exact" value="angry">
            <evaEmotion emotion="happy" />
      <talk>Ok! You are correct</talk>
      <counter var="score" op="+" value="1" />
    </case>
          <default>
            <evaEmotion emotion="sad" />
      <talk>You are wrong</talk>
    </default>
        </switch>
      </case>
    </switch>
    <counter var="chance" op="+" value="1" />
    <switch var="chance">
      <case op="eq" value="3">
        <evaEmotion emotion="happy" />
        <talk>Your score was #score</talk>
        <talk>It was good to play with you $1. Bye</talk>
        <light state="off" />
        <stop />
      </case>
      <default>
        <goto target="LOOP" />
      </default>
    </switch>
  </script>
  </evaml>