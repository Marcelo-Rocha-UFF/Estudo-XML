<?xml version="1.0" encoding="UTF-8"?>
<evaml name="task" >
  <settings>
    <voice tone="en-US_AllisonV3Voice"  />
    <lightEffects mode="on" />
    <audioEffects mode="on" vol="100%" />
  </settings>
  <script>
    <!-- tarefa (parte 01) *********************************************************************** -->
    <evaEmotion emotion="neutral" />
    <light state="on" color="white" />
    <audio source="mario-start" block="true" />
    <light state="on" color="yellow" />
    <evaEmotion emotion="happy" />
    <talk>Hi, I'm the robot Eva / Hello, my name is Eva / Hi, what is up. I am the robot Eva</talk>
    <light state="on" color="pink" />
    <evaEmotion emotion="neutral" />
    <wait duration="2000" />
    <!-- tarefa (parte 02) ************************************************************************* -->
    <random min="1" max="3" />
    <switch var="$">
      <case op="eq" value="1"> <!-- primeiro cenário -->
        <light state="on" color="red" />
        <useMacro name="GET_NAME" />
        <talk>Hello $, it is good to have you</talk>
      </case>
      <case op="eq" value="2"> <!-- segundo cenário -->
        <light state="on" color="blue" />
        <useMacro name="GET_NAME" />
        <talk>Hi $, how are you?</talk>
      </case>
      <case op="eq" value="3"> <!-- terceiro cenário -->
        <light state="on" color="green" />
        <useMacro name="GET_NAME" />
        <talk>Hello $, how is it going?</talk>
      </case>
    </switch>
    <talk>Let's play the emotions game?</talk>
    <listen />
    <switch var="$">
      <case op="contain" value="yes">
        <evaEmotion emotion="happy" />
        <talk>Excelent! Let's go now</talk>
      </case>
      <case op="contain" value="no">
        <evaEmotion emotion="sad" />
        <talk>Oh, I'm sorry you don't want to play. Bye!</talk>
        <light state="off" />
        <stop />
      </case>
    </switch>
    <!-- tarefa (parte 03) ************************************************************************* -->
    <talk>I will show an emotion and you try to imitate me</talk>
    <counter var="score" op="=" value="0" />
    <counter var="chance" op="=" value="0" />
    <random id = "LOOP" min="1" max="3" />
    <switch var="$">
      <case op="eq" value="1">
        <evaEmotion emotion="sad" />
        <light state="on" color="blue" />
        <useMacro name="GET_EXPRESSION" />
        <switch var="$">
          <case op="exact" value="sad">
            <useMacro name="RIGHT_ANSWER" />
          </case>
          <default>
            <useMacro name="WRONG_ANSWER" />
          </default>
        </switch>
      </case>
      <case op="eq" value="2">
        <evaEmotion emotion="happy" />
        <light state="on" color="yellow" />
        <useMacro name="GET_EXPRESSION" />
        <switch var="$">
          <case op="exact" value="happy">
            <useMacro name="RIGHT_ANSWER" />
          </case>
          <default>
            <useMacro name="WRONG_ANSWER" />
          </default>
        </switch>
      </case>
      <case op="eq" value="3">
        <evaEmotion emotion="angry" />
        <light state="on" color="red" />
        <useMacro name="GET_EXPRESSION" />
        <switch var="$">
          <case op="exact" value="angry">
            <useMacro name="RIGHT_ANSWER" />
          </case>
          <default>
            <useMacro name="WRONG_ANSWER" />
          </default>
        </switch>
      </case>
    </switch>
    <counter var="chance" op="+" value="1" />
    <switch var="chance">
      <case op="eq" value="3">
        <evaEmotion emotion="happy" />
        <talk>Your score was #score</talk>
        <talk>It was good to play with you $2. Bye</talk>
        <light state="off" />
        <stop />
      </case>
      <default>
        <goto target="LOOP" />
      </default>
    </switch>
  </script>
  <macros>
    <!-- definida na parte 02 da tarefa -->
    <macro name="GET_NAME">
      <talk>Hi, what is your name</talk>
      <listen />
    </macro>
    <!-- definidas na parte 03 da tarefa -->
    <macro name="GET_EXPRESSION">
      <talk>Can you imitate me?</talk>
      <userEmotion />
    </macro>
    <macro name="RIGHT_ANSWER">
      <evaEmotion emotion="happy" />
      <talk>Ok! You are correct</talk>
      <counter var="score" op="+" value="1" />
    </macro>
    <macro name="WRONG_ANSWER">
      <evaEmotion emotion="sad" />
      <talk>You are wrong</talk>
    </macro>
  </macros>
</evaml>